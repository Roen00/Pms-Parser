package adt

import org.scalatest.{FunSuite, Matchers}
import scodec.Attempt
import scodec.Attempt.Successful
import scodec.bits._

class VectorOfSectorsTest extends FunSuite with Matchers {
  test("encoded -> decoded -> encoded") {
    val vector = hex"3a000000190000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030029002a004a00010029000100290001002900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001004a00030029002a004a00030029002a004a0001002a000100290001002900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c00000000000000000000000000000000000000001004a000000050029002a0049004a006c00040029002a0049004a00020029002a0001002900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c0000000000000000000000000000000000001004a0001004a00020049004a0004002a0049004a006c0006000f0029002a0049004a006c00020029002a00020029002a000100290000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c0000000000000000000000000000000000001004a00020049004a00020049004a00020049004a0003000f0011002a000000020029002a00020029002a0001002a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c0000100c00000000000000000000000000001004a0001004a00020049004a00020049004a00000003000f0011002a0003000f0011002a00000001002900020029002a0001002a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c0000100c0000000000000000000000001004a0001004a00020049004a00020049004a0001004900000001000f0003000f0011002a000000000002002a00470002002a004700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c0000100c0000000000000000000000001004a00020049004a00020049004a0001004900000000000000020011002a0001002a00000002002a004700010047000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c000000000000000000001004a00020049004a00020049004a000100490001004900000000000000000001002a000000030028002a004700010047000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c000000003001f004d004e0002004b004d0004001e004a004b004d0004001e0049004a004b0003001e0049004a0001004900010049000000000000000000000001002a00030028002a004700030028002a004700010047000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c00003001e001f004c0005001e001f004c004d004e0006001e001f004b004c004d004e0007001e001f0049004a004b004d004e0005001e0049004a004b004d0002001e004b00010049000000000000000000000000000000030028002a004700020028002a00010047000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c00003001e001f004c0004001e001f0031004c0004001e001f0031004c0003001f004d004e0005001f0049004b004d004e00040049004b004d004e000100490000000000000000000000000001002800030028002a00470000000100470000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002004c00c00004001f0031004c00c000020031004c0001003100000000000000000000000000000000000000000001002800020028004700000001004700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030031004c00c000030031004c00c00001003100000000000000000000000000000000000000000000000200280047000300280047006f0001006f00020047006f0001006f0001006f0001006f0001006f0001006f0001006f0001006f0001006f0001006f0001006f0001006f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002003100c00002003100c00001003100000000000000000000000000000001004300070039003a0043004400ac00ad00b9000c0039003a0079007a007d007e007f0080008100ac00b900d00003006f007d007e000300470068006f000300280068006f00020068006f00020047006f0001006f0001006f0001006f0000000000000001006f0001006f0001006f0001006f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002003100c00002003100c0000000000000000000000000000000000001004300070039003a0043004400ac00ad00b9000b003a0079007a007d007e007f0080008100ad00b900d00003006f007d007e0002004700680002004700680002004700680002004700680000000000000001006f0001006f0001006f0001006f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002003100c00002003100c00000000000000000000000050015001600730074009f00060015001600730074009f00a00002009f00a000020043004400020043004400070079007a007d007e0080008100d00003006f007d007e0000000000000002006f00700002006f00700002006f00700002006f00700002006f00700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010031000100c0000000000000000000000005001500160073007400a00002001500a00002009f00a00002004300440001004400020079007a0001006f0002006f00700002006f00700002006f00700002006f0070000000010070000100700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c000000000000000000000000400150016007300740002001500bc000200bc00bd00020043004400010044000400480079007a00a300030048006f00700002006f00700001006e00000000000100700001007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c0000000000000000000020073007400040014006b0073007400030014009900bc000200bc00bd00000000000400480079007a00a300010048000100700001006e0001006e0001007000010070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001004f0002005300c0000000000000000000020073007400040014002d002e006b00080014002d002e006b00980099009d00bc000500970099009d00bc00bd00040097009d00c200c3000200a300b20007004800780079007a00a300a400b20004004800a400b000b20002007000a40002006e00700001006e000100700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001004f0003005300c000c10002005300c100000000000000000000000000000003000100c200c30004000100a300b200c20009004800780079007a00a300a400a500b000b200070048007800a300a400a500b000b2000200a400a50002006e00700002006e00700002006e0070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001004f0001004f0003005300c000c10003005300c000c100000000000000000000000000000000000100b2000900780079007a007b007c00a500b000b200b70003007800b000b7000200b700b80002006e0070000100700001006e0001006e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001004f0001004f0003005300c000c10003005300c000c100010053000000000000000000000000000000040077007800b000b20009007700780079007a007b007c00b000b200b700050077007800b000b700b80003007700b700b80001006e00000001006e0001006e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001004f0001004f0003005300c000c1000200c000c100010053000000000000000000000000000000060077007800af00b000b100b2000c007700780079007a007b007c00af00b000b100b200b700b800060077007800af00b000b700b80003007800b700b80001006e000000000001006e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001004f0001004f0003005300c000c10003005300c000c10001005300000000000000000000000000000003007800b100b8000800780079007a007b007c00af00b100b80003007800af00b70003007800b700b80001006e00000001006e0001006e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001004f0001004f0003005300c000c10003005300c000c10000000000000000000000000000000200c400c50004000300b100b800c400080079007a007b007c00a700af00b100b8000300a700af00b8000300a600a700b80002006e0071000100710001006e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001004f0002005300c10002005300c100000000000000000002002b006a0005001b002b006a009b009e0003009e00be00bf00050003009a009e00c400c500040003006200b100c4000800610062007b007c00a600a700af00b100060061006200a600a700af00b1000200a600a70002006e00710002006e00710002006e00710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001004f000100c1000100c10000000000000002007500760004001b002b002c006a0007001b002b002c006a009b009c009e0005009a009c009e00be00bf0004009a009e00c400c500010062000400610062007b007c00010061000100710002006e00710001006e0001007100010071000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c1000100c10000000000000002007500760002007500760000000200be00bf00000000000400610062007b007c00010061000100710001006e0001006e000000010071000100710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c1000100c1000100c1000000000000000000040019001a007500760001001900000002005f006000010060000400610062007b007c00030061007100720002007100720003006e0071007200000000000100710001007100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002002f00c10002002f00c10000000000000000000000050019001a0075007600a200050019001a007600a100a2000200a100a20002005f0060000100600006007b007c008b008d008e00d100030072008a008b0001007100020071007200020071007200020071007200020071007200010071000100710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002002f00c10002002f00c1000000000000000000000004001a0075007600a100060019001a0075007600a100a2000200a100a20002005f00600002005f00600007007b007c008a008b008d008e00d100030072008a008b0000000200560069000200560069000200560069000200710072000200710072000200710072000200710072000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002002f00c10002002f00c1000000000000000000000000000000000001005f000700350036005f006000ae00ba00bb000d00350036007b007c008a008b008c008d008e00ae00ba00bb00d100040072008a008b00ae000200560069000200560069000200560069000200560069000000000000000100720001007200010072000100720001007200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002002f00c10002002f00c10001002f00000000000000000000000000000001005f0002005f00600003008a008c00bb00030072008a008b0003005600690072000300550069007200010072000200560072000100720001007200010072000100720001007200010072000100720001007200010072000100720001007200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003002f003000c10003002f003000c10001002f000000000000000000000000000000000000000000000002005500560002005500560000000100560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002003000c10005001d0020002f003000c100030020002f003000020020002f000100200001002100010021000000000000000000000000000000010055000200550056000000010056000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c10003001d002000300003001d002f00300005001d00200021002f00300004001d00200021005c000500200021005a005b005c00040021005a005b005c0001005a00000000000000000000000000010055000300550056005700000001005600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c1000100c10003001d002000300005001d002000210030005c0005001d00200021005b005c0007001d002000210059005a005b005c0005001d0059005a005b005c0002001d005b0001005a0000000000000000000000000000000300550056005700030055005600570001005600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c1000100c100000001005c0002005b005c0002005b005c00030059005a005b00020059005a0001005a0001005a000000000000000000000001005700020055005700030055005600570001005600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c1000100c100000000000000000001005900020059005a00020059005a0001005a0001005a00000000000000000001005700000002005600570001005600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c1000100c1000000000000000000000001005900020059005a00020059005a0001005a000000000000000200120057000200120057000000020056005700020056005700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c1000000000000000000000000000100590001005900020059005a00020059005a0001005a00000001001000030010001200570000000000020056005800020056005700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c10000000000000000000000000000000100590001005900020059005a00020059005a0001005a00020010005700030010001200570000000100580002005700580001005700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c10000000000000000000000000000000000010059000000020059005a00020059005a0002001000570001005800020057005800020057005800010057000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c10000000000000000000000000000000000010059000100590000000400570059005a006d00060010005700580059005a006d000200570058000200570058000100580000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c10000000000000000000000000000000000000001005900020057005900030057005800590004005700580059005a00010057000100580000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c1000100c10000000000000000000000000000000000000000000300570058005900030057005800590001005800010058000100580000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100c1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000".bits
    val result: Attempt[BitVector] = for {
      decoded <- VectorOfSectors.codec.decodeValue(vector)
      encoded <- VectorOfSectors.codec.encode(decoded)
    } yield encoded
    result shouldEqual Successful(vector)
  }
}

